{% extends "base.twig" %}


{# PAGINA PER VEURE EL PERFIL D'UN USUARI AMB LES SEVES FOTOS #}

{% block title %}{{ user2.username }}'s profile{% endblock %}


{% block content %}

    <img src="{{ user2.img_path }}" alt="Profile pic" class="img-circle" height="200" width="200">
    <h1>{{ user2.username }}'s profile</h1>
    <p>{{ user2.num_images }} images</p>
    <p>{{ user2.comments }} comments</p>
    {% if user is defined and user2.id == user.id %}
        <!--<a href="/edit">Edit profile</a>-->
        <button type="button" class="btn btn-sm btn-outline-secondary">
            <a data-toggle="modal" data-target="#edit-profile-modal" class="nav-item nav-link" href="">Edit your profile</a>
        </button>
        <a href="/comment-list/{{ user.id }}">See your comments</a>
    {% endif %}

    <h2>Published images</h2>
    <ul id="user-img" class="img-list list-unstyled">
        <div class="row">
            {% for img in images %}
                <li class="col-md-6 col-lg-4">
                    <figure id="{{ img.id }}">
                        <img src="{{ img.img_path }}" alt="{{ img.title }}" width="400" height="300" class="img-rounded">
                        <figcaption>
                            <a href="/image/{{ img.id }}">{{ img.title }}</a>
                            {% if user is defined and user.id == user2.id %}
                                <button type="button" class="btn btn-sm btn-outline-secondary">
                                    <a data-toggle="modal" data-target="#edit-image-modal" class="nav-item nav-link" href="">Edit</a>
                                </button>
                                <a href="/remove/{{ img.id }}">Delete</a>
                            {% endif %}
                        </figcaption>
                    </figure>
                </li>



    <div class="modal fade" id="edit-profile-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
        <div class="modal-dialog">
            <div class="loginmodal-container">
                <h1>Edit your Profile</h1><br>
                <form method="post" action="/edit-profile" enctype="multipart/form-data" data-toggle="validator">
                    <div class="form-group has-feedback">
                        <label class="control-label">Username:</label>
                        <input type="text" name="user" placeholder="Username" maxlength="20" pattern="^[_A-z0-9]{1,}$" class="form-control" required>
                        <div class="help-block with-errors"></div>
                    </div>
                    <div class="form-group">
                        <label class="control-label">Birthdate:</label>
                        <input type="date" name="birthdate" class="form-control" required>
                        <div class="help-block with-errors"></div>
                    </div>
                    <div class="form-group has-feedback">
                        <label class="control-label">Password:</label>
                        <input type="password" class="form-control" placeholder="Password" name="password" id="password" minlength="6" maxlength="12" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])[a-zA-Z0-9]{6,}$" required>
                        <div class="help-block">The password must be 6-12 characters long and contain lowercase, uppercase and numbers.</div>
                    </div>
                    <div class="form-group has-feedback">
                        <label class="control-label">Confirm password:</label>
                        <input type="password" name="password2" placeholder="Confirm Password" class="form-control" data-match="#password" data-match-error="The passwords don't match." required>
                        <div class="help-block with-errors"></div>
                    </div>
                    <div class="imageupload panel panel-default form-group">
                        <label class="control-label">Icon:</label>
                        <div class="file-tab panel-body">
                            <label class="btn btn-default btn-file">
                                <span>Browse</span>
                                <input type="file" name="img" placeholder="Profile Image">
                            </label>
                            <button type="button" class="btn btn-default">Remove</button>
                        </div>
                        <div class="help-block with-errors"></div>
                    </div>
                    <div class="form-group">
                        <input type="submit" name="signup" value="Sign Up" class="form-control">
                    </div>
                </form>{# /assets/img/{{ img.filename }} #}
            </div>
        </div>
    </div>

    <div class="modal fade" id="edit-image-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
        <div class="modal-dialog">
            <div class="loginmodal-container">
                <h1>Edit this image</h1><br>
                <form method="post" action="/edit-image/{{ img.id }}" enctype="multipart/form-data" data-toggle="validator">
                    <div class="imageupload panel panel-default form-group">
                        <div class="file-tab panel-body">
                            <label class="btn btn-default btn-file">
                                <span>Browse</span>
                                <input type="file" name="img" class="form-control">
                            </label>
                            <button type="button" class="btn btn-default">Remove</button>
                        </div>
                        <div class="help-block with-errors"></div>
                    </div>
                    <div class="form-group">
                        <input type="text" name="title" placeholder="Image Title" class="form-control">
                        <div class="help-block with-errors"></div>
                    </div>
                    <div class="form-group">
                        <label>Make Image Private</label><input type="checkbox" value="1" name="private">
                    </div>
                    <div class="form-group">
                        <input type="submit" name="edit" class="login loginmodal-submit form-control" value="Upload Image">
                    </div>
                </form>
            </div>
        </div>
    </div>

            {% endfor %}
        </div>
    </ul>

{% endblock %}